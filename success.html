<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>éªŒè¯é€šè¿‡</title>
  <link rel="icon" href="./assets/favicon.svg" type="image/svg+xml">
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="bg"></div>
  <main class="wrap">
    <section class="card" role="region" aria-label="éªŒè¯é€šè¿‡">
      <header class="header">
        <div class="brand">
          <div class="lock" aria-hidden="true" style="color:var(--green);">
            <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
              <path d="M9 12l2 2 4-5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              <path d="M20 12c0 4.418-3.582 8-8 8s-8-3.582-8-8 3.582-8 8-8 8 3.582 8 8Z" stroke="currentColor" stroke-width="2"/>
            </svg>
          </div>
          <h1>éªŒè¯é€šè¿‡</h1>
        </div>
      </header>

      <section class="panel">
        <div class="tip-text" style="font-size:16px;">
          å¦‚æœæµè§ˆå™¨æ— æ³•è‡ªåŠ¨è·³è½¬ï¼ˆæˆ–å…¨éƒ¨å€™é€‰ä¸å¯ç”¨ï¼‰ï¼Œä½ å¯ä»¥æ‰‹åŠ¨é€‰æ‹©å®˜ç½‘å…¥å£ï¼š
        </div>

        <div id="bestBox" class="tip" style="margin-top:14px; display:none;">
          <div class="tip-title"><span class="tip-ico" aria-hidden="true">âœ…</span> å·²é€‰æ‹©æœ€ä½å»¶è¿Ÿå…¥å£</div>
          <div class="tip-text" id="bestUrl"></div>
        </div>

        <div id="listBox" class="tip" style="margin-top:14px;">
          <div class="tip-title"><span class="tip-ico" aria-hidden="true">ğŸ”—</span> å®˜ç½‘å…¥å£åˆ—è¡¨</div>
          <div class="tip-text" id="list"></div>
        </div>

        <div style="margin-top:14px; display:flex; gap:10px; flex-wrap:wrap;">
          <a class="btn-ghost" style="text-decoration:none; display:inline-flex; align-items:center;"
             href="./index.html">è¿”å›éªŒè¯é¡µ</a>
        </div>

        <div class="tip" style="margin-top:16px;">
          <div class="tip-title"><span class="tip-ico" aria-hidden="true">â“˜</span> é…ç½®æç¤º</div>
          <div class="tip-text">
            ä½ å¯ä»¥åœ¨ <b>config.js</b> é‡Œé…ç½®ï¼š<br/>
            1) <b>redirectCandidates</b>ï¼šå¤šä¸ªå®˜ç½‘åœ°å€ï¼ˆæ•°ç»„ï¼‰<br/>
            2) <b>probePath</b>ï¼šæ¢æµ‹è·¯å¾„ï¼ˆå»ºè®®æ¯ä¸ªå®˜ç½‘éƒ½æä¾› /generate_204 æˆ– /ping.txtï¼‰<br/>
            3) <b>probeTimeoutMs</b> / <b>probeAttempts</b>ï¼šè¶…æ—¶å’Œæ¬¡æ•°<br/>
          </div>
        </div>
      </section>

      <footer class="foot">
        <span>æç¤ºï¼šæ­¤é¡µé¢ä¸ºçº¯å‰ç«¯é™æ€é¡¹ç›®ï¼Œæ— éœ€åç«¯ã€‚</span>
      </footer>
    </section>
  </main>

  <script>
    (function(){
      const best = sessionStorage.getItem("official_best_url");
      const candidatesRaw = sessionStorage.getItem("official_candidates");
      let list = [];
      try{ list = JSON.parse(candidatesRaw || "[]"); }catch{}

      const bestBox = document.getElementById("bestBox");
      const bestUrl = document.getElementById("bestUrl");
      if (best){
        bestBox.style.display = "";
        bestUrl.innerHTML = '<a href="'+best+'" target="_blank" rel="noopener">'+best+'</a>';
      }

      const listEl = document.getElementById("list");
      if (!list || list.length === 0){
        listEl.textContent = "æœªé…ç½® redirectCandidatesï¼Œè¯·åœ¨ config.js ä¸­å¡«å†™å®˜ç½‘åœ°å€æ•°ç»„ã€‚";
        return;
      }

      const html = list.map(u => {
        const safe = String(u).replace(/"/g,"&quot;");
        return '<div style="margin:6px 0;"><a href="'+safe+'" target="_blank" rel="noopener">'+safe+'</a></div>';
      }).join("");
      listEl.innerHTML = html;
    })();
  </script>
</body>
</html>
